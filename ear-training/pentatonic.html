<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-RLY5G4FXNC"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-RLY5G4FXNC");
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ear Training - Banjo Sandwich</title>
    <link rel="stylesheet" href="/styles.css" />

    <script src="https://unpkg.com/tone"></script>
    <script src="/js/analytics.js"></script>

    <script src="/js/ear-training.js" defer></script>

    <script>
      // Enhanced playNote function with fretboard tracking
      function playNoteFromFretboard(note, string, fret) {
        playNote(note);

        // Track fretboard interactions
        if (typeof gtag !== "undefined") {
          gtag("event", "fretboard_note_play", {
            event_category: "ear_training",
            event_label: note,
            string: string,
            fret_position: fret,
            custom_parameter_1: "fretboard_interaction",
          });
        }
      }
    </script>
  </head>
  <body class="ear-training-page">
    <div id="header-placeholder"></div>
    <script src="/js/header.js"></script>

    <main>
      <section class="hero">
        <div class="container">
          <div class="hero-content">
            <h2>Ear Training</h2>
            <p>Develop your musical ear for banjo and bluegrass</p>
          </div>
        </div>
      </section>

      <section class="events-section">
        <div class="container">
          <h2>Pentatonic Box Notes</h2>

          <div class="pentatonic-training-container">
            <div class="test-description">
              <p>
                This test helps you develop the ability to identify notes within
                the pentatonic scale box pattern commonly used in banjo playing.
                The pentatonic scale is fundamental to bluegrass and country
                music, making it essential for banjo players to recognize these
                notes by ear.
              </p>

              <p class="note-explanation">
                <strong>Note:</strong> C4 is included in this exercise even
                though it's not part of the G major pentatonic scale (G, A, B,
                D, E). This note is commonly used as a passing tone in bluegrass
                banjo playing and appears naturally on the 1st fret of the B
                string in the standard pentatonic box pattern, making it
                important for practical ear training.
              </p>

              <h4>How to Use This Test:</h4>
              <ul>
                <li>
                  <strong>Click "Play Note"</strong> to hear a random note from
                  the pentatonic box
                </li>
                <li>
                  <strong>Listen carefully</strong> and try to identify which
                  note was played
                </li>
                <li>
                  <strong>Click your guess</strong> from the available note
                  buttons
                </li>
                <li>
                  <strong>Get immediate feedback</strong> - green for correct,
                  red for incorrect
                </li>
                <li>
                  <strong>Track your progress</strong> with the accuracy
                  percentage displayed
                </li>
              </ul>

              <h4>Practice Tips:</h4>
              <ul>
                <li>
                  Start by familiarizing yourself with the sound of each note
                  individually
                </li>
                <li>
                  Pay attention to the relative pitch relationships between
                  notes
                </li>
                <li>
                  Practice regularly in short sessions to build your ear
                  gradually
                </li>
                <li>
                  Use this alongside physical practice on your banjo for best
                  results
                </li>
              </ul>
            </div>

            <div class="fretboard-container">
              <h4>Pentatonic Scale on Banjo Fretboard</h4>
              <div class="banjo-fretboard">
                <!-- Fret numbers -->
                <div class="fret-numbers">
                  <span class="fret-number"></span>
                  <span class="fret-number">Nut</span>
                  <span class="fret-number">1</span>
                  <span class="fret-number">2</span>
                  <span class="fret-number">3</span>
                  <span class="fret-number">4</span>
                  <span class="fret-number">5</span>
                </div>

                <!-- String 1 (D) -->
                <div class="string-row">
                  <span class="string-label">D</span>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('D4', 'D', 0)"
                    >
                      D4
                    </button>
                  </div>
                  <div class="fret"></div>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('E4', 'D', 2)"
                    >
                      E4
                    </button>
                  </div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                </div>

                <!-- String 2 (B) -->
                <div class="string-row">
                  <span class="string-label">B</span>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('B3', 'B', 0)"
                    >
                      B3
                    </button>
                  </div>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('C4', 'B', 1)"
                    >
                      C4
                    </button>
                  </div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                </div>

                <!-- String 3 (G) -->
                <div class="string-row">
                  <span class="string-label">G</span>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('G3', 'G', 0)"
                    >
                      G3
                    </button>
                  </div>
                  <div class="fret"></div>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('A3', 'G', 2)"
                    >
                      A3
                    </button>
                  </div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                </div>

                <!-- String 4 (D) -->
                <div class="string-row">
                  <span class="string-label">D</span>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('D3', 'D-low', 0)"
                    >
                      D3
                    </button>
                  </div>
                  <div class="fret"></div>
                  <div class="fret pentatonic">
                    <button
                      class="note-btn"
                      onclick="playNoteFromFretboard('E3', 'D-low', 2)"
                    >
                      E3
                    </button>
                  </div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                  <div class="fret"></div>
                </div>

                <!-- String 5 (G) - 5th string (shorter) -->
                <div class="string-row fifth-string">
                  <span class="string-label">g</span>
                  <div class="fret empty"></div>
                  <div class="fret empty"></div>
                  <div class="fret empty"></div>
                  <div class="fret empty"></div>
                  <div class="fret empty"></div>
                  <div class="fret">
                    <button class="note-btn" onclick="playNote('G4')">
                      G4
                    </button>
                  </div>
                </div>

                <div class="legend">
                  <span class="legend-item">
                    <span class="legend-dot pentatonic"></span>
                    Pentatonic Scale Notes
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="overall-totals">
            <span id="overall-totals"
              >Total Correct: 0 | Total Incorrect: 0</span
            >
          </div>

          <div id="tests-container" class="tests-container">
            <!-- Tests will be generated here -->
          </div>
        </div>
      </section>
    </main>

    <div id="footer-placeholder"></div>
    <script src="js/footer.js"></script>
  </body>
</html>
